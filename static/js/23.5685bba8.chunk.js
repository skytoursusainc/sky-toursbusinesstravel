(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{973:function(e,a,t){"use strict";t.r(a);var r=t(65),n=t.n(r),o=t(1),l=t(69),c=t(84),i=t(187),s=t(9),d=t(0),m=t.n(d),u=t(13),f=t.n(u),p=t(26),h=t.n(p),y=t(6),v=t(5),E=t(14),b=(t(41),t(36)),g=t(3),k=t.n(g),x=t(8),I=t.n(x),N=t(2),O=t.n(N),C=t(21),j=t.n(C),A=t(7),w=t.n(A),q=function(e){var a=e.field,t=e.label,r=e.state,n=e.dispatch,o=e.indices,l=e.validationFn,c=void 0===l?function(e){return""}:l,i=(e.errorMessage,e.readOnly),s=void 0!==i&&i,d=e.type,u=void 0===d?"text":d;return m.a.createElement(w.a.Group,{controlId:a},m.a.createElement(w.a.Label,{className:""},t," ",r[a].required?"*":""),m.a.createElement(w.a.Control,{readOnly:s,type:u,defaultValue:r[a].val,onBlur:function(e){var t=Object(E.d)(e.target.value),r=c(t);n(t&&!r?{type:"set-value",payload:[a,t,o.roomIndex,o.guestIndex]}:{type:"set-error",payload:[a,r,o.roomIndex,o.guestIndex]})},onFocus:function(){r[a].err&&n({type:"set-error",payload:[a,"",o.roomIndex,o.guestIndex]})},isValid:!r[a].err&&r[a].val,isInvalid:r[a].required&&r[a].err}),m.a.createElement(w.a.Control.Feedback,{type:"invalid",className:"position-absolute"},r[a].err))},D=function(e){var a=e.field,t=e.label,r=e.state,n=e.dispatch,o=e.indices,l=e.validationFn,c=void 0===l?function(e){return""===e?"This field cannot be empty!":""}:l,i=e.errorMessage,s=void 0===i?"":i,d=e.readOnly,u=void 0!==d&&d,f=e.type,p=void 0===f?"select":f,h=e.array,y=void 0===h?[]:h;return m.a.createElement(w.a.Group,{controlId:a},m.a.createElement(w.a.Label,{className:t.length?"":"invisible"},s," ",t," ",r[a].required||!t.length?"*":""),m.a.createElement(w.a.Control,{as:"select",readOnly:u,type:p,defaultValue:r[a].val&&y.length>0?y.find(function(e){return e.code==r[a].val}).name:y[0].name||y[0],onChange:function(e){var t=e.target.value,r=c(t);n(t&&!r?{type:"set-value",payload:[a,t,o.roomIndex,o.guestIndex]}:{type:"set-error",payload:[a,r,o.roomIndex,o.guestIndex]})},onFocus:function(){r[a].err&&n({type:"set-error",payload:[a,"",o.roomIndex,o.guestIndex]})},isValid:!r[a].err&&r[a].val,isInvalid:r[a].required&&r[a].err},y.length>0&&y.map(function(e,a){return m.a.createElement("option",{key:a,value:e.code||""===e.code?e.code:e},e.name||e)})),m.a.createElement(w.a.Control.Feedback,{type:"invalid",className:"position-absolute ".concat(/birth/.test(a)?"disappear":"d-block"," ")},s||r[a].err))},M=function(e){var a=e.roomIndex,t=e.guestIndex,r=e.guest,n=e.dispatch,o=(e.selectArray4CountryCode,e.selectArray4Nationality),l=e.selectArray4Days,c=e.selectArray4Months,i=e.selectArray4Years,d=e.fullDateError,u=void 0===d?"":d,f=e.validateWholeDate,p=m.a.useState(r.firstname.required||Object.values(r).some(function(e){return e.val})),h=Object(s.a)(p,2),v=h[0],b=h[1],g=m.a.useState(u),k=Object(s.a)(g,2),x=k[0],N=k[1],C=m.a.useState(),j=Object(s.a)(C,2),A=j[0],M=j[1],F=function(){var e=r.birthDay,a=r.birthMonth,t=r.birthYear;f({birthDay:e,birthMonth:a,birthYear:t},N)};return m.a.useEffect(function(){F()},[]),m.a.useEffect(function(){setTimeout(function(){return M(function(e){v&&M(!0)})},100)},[v]),!v&&t?m.a.createElement("p",{className:"guest-add",onClick:function(){return b(function(e){return!e})}},m.a.createElement("span",{className:"arrow"},"\u25b6 "),m.a.createElement("span",{className:"text"}," Fill out for ",y.O[t+1]," guest (optional)")):m.a.createElement("div",null,m.a.createElement(w.a,{className:"text-left"},m.a.createElement(I.a,{className:"transition-to-hide ".concat(A?"transition-to-show":"")},m.a.createElement(O.a,{xs:12,md:9},m.a.createElement(I.a,{className:"".concat(t?"margin-t30":"margin-t10")},v&&t?m.a.createElement("p",{className:"guest-add arrow-down position-relative",onClick:function(){t&&(M(!1),setTimeout(function(){return b(function(e){return!e})},600))}},m.a.createElement("span",null,m.a.createElement("span",{className:"arrow"},"\u25b2")," ",m.a.createElement("span",{className:"text"},"Close"))):"",m.a.createElement(O.a,{xs:12,className:"height-50"},m.a.createElement(w.a.Group,{controlId:"gender".concat(a).concat(t),id:"gender".concat(a).concat(t)},y.F.map(function(e){return m.a.createElement(w.a.Check,{key:e.value+"".concat(a).concat(t),id:e.value+"".concat(a).concat(t),custom:!0,type:"radio",label:e.value,"aria-label":e.value,className:"float-left padding-tb10 margin-r20",value:e.value,checked:e.value===r.gender.val,isValid:!r.gender.err&&r.gender.val,isInvalid:r.gender.required&&r.gender.err,onChange:function(e){var r=e.target.value,o=Object(E.l)(r);n(r?{type:"set-value",payload:["gender",r,a,t]}:{type:"set-error",payload:["gender",o,a,t]})}})}),m.a.createElement(w.a.Control.Feedback,{type:"invalid",className:"position-absolute"},r.gender.err))),m.a.createElement(O.a,{xs:12,md:6,className:"margin-b10"},m.a.createElement(q,{field:"firstname",label:"First Name",state:r,dispatch:n,indices:{roomIndex:a,guestIndex:t},validationFn:E.l,errorMessage:"Enter your first name please!"})),m.a.createElement(O.a,{xs:12,md:6,className:"margin-b10"},m.a.createElement(q,{field:"lastname",label:"Last Name",state:r,dispatch:n,indices:{roomIndex:a,guestIndex:t},validationFn:E.l,errorMessage:"Enter your last name please!"})))),m.a.createElement(O.a,{xs:12,md:9,onBlur:F,className:x?"form-error-area":""},m.a.createElement(I.a,null,m.a.createElement(O.a,{xs:12,sm:4},m.a.createElement(D,{field:"birthDay",label:"Birthday",state:r,dispatch:n,indices:{roomIndex:a,guestIndex:t},array:l})),m.a.createElement(O.a,{xs:12,sm:4},m.a.createElement(D,{field:"birthMonth",label:"",state:r,dispatch:n,indices:{roomIndex:a,guestIndex:t},array:c})),m.a.createElement(O.a,{xs:12,sm:4},m.a.createElement(D,{field:"birthYear",label:"",state:r,dispatch:n,indices:{roomIndex:a,guestIndex:t},array:i})),m.a.createElement(O.a,{xs:12},m.a.createElement("p",{className:"accent-color"},x)))),m.a.createElement(O.a,{xs:12,md:9},m.a.createElement(I.a,null,m.a.createElement(O.a,{xs:12,md:6},m.a.createElement(D,{field:"nationality",label:"Nationality",state:r,dispatch:n,indices:{roomIndex:a,guestIndex:t},array:o})))))))},F=function(e){var a=e.state,t=e.dispatchContactInfo,r=e.selectArray4CountryCode,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{roomIndex:"",guestIndex:""};return m.a.createElement(h.a,{className:"overflow-hidden  Hotelbookform"},m.a.createElement("div",{className:"text-left margin-b50"},m.a.createElement("h2",{className:"contact"},"Contact Information"),m.a.createElement("div",{className:"guests"},m.a.createElement(w.a,{className:"text-left"},m.a.createElement(I.a,null,m.a.createElement(O.a,{xs:12,md:5},m.a.createElement(q,{field:"email",label:"Email",state:a,dispatch:t,indices:n,validationFn:E.k,readOnly:!0})),m.a.createElement(O.a,{xs:12,md:3},m.a.createElement(D,{field:"countryCode",label:"Country code",state:a,dispatch:t,indices:n,array:r})),m.a.createElement(O.a,{xs:12,md:4},m.a.createElement(q,{field:"phone",label:"Phone",state:a,dispatch:t,indices:n,validationFn:E.p})))))))},S=function(e){e.militaryfares,e.history,e.t;var a=e.appActions,t=(e.location,e.rooms,e.hotelBookform),r=e.selectArray4CountryCode,n=e.userInfo,l=e.selectArray4Nationality,c=e.clientId,i=e.hotelSelected,d=e.priceValidation,u=m.a.useState(""),f=Object(s.a)(u,2),p=f[0],v=f[1],b=m.a.useState(""),g=Object(s.a)(b,2),x=g[0],N=g[1],C=m.a.useCallback(function(e){var r=e.type,n=e.payload,l=Object(s.a)(n,4),c=l[0],i=l[1],d=l[2],m=l[3],u=Object(o.a)({},t);switch(r){case"set-value":return u.rooms[d].guests[m][c].val=i,u.rooms[d].guests[m][c].err="",a.setHotelBookfrom(u);case"set-error":return u.rooms[d].guests[m][c].err=i,u.rooms[d].guests[m][c].val="",a.setHotelBookfrom(u);default:return t}}),A=m.a.useCallback(function(e){var r=e.type,n=e.payload,l=Object(s.a)(n,2),c=l[0],i=l[1],d=Object(o.a)({},t);switch(r){case"set-value":return d[c].val=i,d[c].err="",a.setHotelBookfrom(d);case"set-error":return d[c].err=i,d[c].val="",a.setHotelBookfrom(d);default:return t}}),w=Array.from({length:32},function(e,a){return{code:0===a?"":a,name:0===a?"Day":a}}),q=Array.from({length:13},function(e,a){return{code:0===a?"":a,name:0===a?"Month":y.K[a-1]}}),D=[{code:"",name:"Year"}].concat(Array.from({length:120},function(e,a){var t=k()().locale("en").subtract(a,"years").format("YYYY");return{code:t,name:t}})),S=function(e,a){var t=e.birthDay,r=e.birthMonth,n=e.birthYear;if(t.val&&r.val&&n.val){var o=Object(E.j)({birthDay:t.val,birthMonth:r.val,birthYear:n.val});if(o)return a(o),o}return a(""),""};return 0===t.rooms.length||r.length<2||l.length<2?null:m.a.createElement("div",null,m.a.createElement(h.a,{className:"overflow-hidden  Hotelbookform instruction"},m.a.createElement(I.a,null,m.a.createElement(O.a,{xs:12,md:7},m.a.createElement("ul",null,m.a.createElement("li",null,m.a.createElement("p",null,"Please fill out the form for hotel reservation below.")),m.a.createElement("li",null,m.a.createElement("p",null,"For each room, one guest's information is necessary. Other guests infrmation is optional")))),i&&i.packs&&m.a.createElement(O.a,{xs:12,md:5},m.a.createElement("p",null,m.a.createElement("b",null,i.name)),m.a.createElement("p",null,i.packs[d.roomId].rooms[0].name&&i.packs[d.roomId].rooms[0].name,i.packs[d.roomId].rooms.length>1?" \xd7 "+i.packs[d.roomId].rooms.length:""),m.a.createElement("p",null,"From: ",i.date.from,m.a.createElement("br",null),"Until: ",i.date.to),m.a.createElement("p",null,"For ",i.packs[d.roomId].rooms.reduce(function(e,a){return e+Number(a.occupancy)},0)," ","Guest(s)"),m.a.createElement("p",null,i.packs[d.roomId].total_price," ",i.packs[d.roomId].currency)))),t.rooms.map(function(e,a){return m.a.createElement(h.a,{className:"overflow-hidden  Hotelbookform",key:"room".concat(a)},m.a.createElement("div",{className:"text-left margin-b50"},m.a.createElement("h2",{className:"room"},"Room ",a+1),m.a.createElement("div",{className:"guests"},e.guests.map(function(e,n){return m.a.createElement(M,{key:"".concat(a).concat(n),roomIndex:a,guestIndex:n,guest:t.rooms[a].guests[n],dispatch:C,selectArray4CountryCode:r,selectArray4Days:w,selectArray4Months:q,selectArray4Years:D,selectArray4Nationality:l,fullDateError:x,validateWholeDate:S})}))))}),m.a.createElement(F,{state:{email:t.email,countryCode:t.countryCode,phone:t.phone},dispatchContactInfo:A,selectArray4CountryCode:r}),m.a.createElement(h.a,{className:"submit-btn"},m.a.createElement(I.a,null,m.a.createElement(O.a,{xs:12,md:5},m.a.createElement(j.a,{variant:"primary",className:"search-btn accent has-glow fill text-center d-block",onClick:function(){v("");var r=Object(o.a)({},t),l=0;if(r.rooms.forEach(function(e,a){e.guests.forEach(function(e,t){Object.entries(e).forEach(function(r){var n=Object(s.a)(r,2),o=n[0],c=n[1];if(c.required){if(["firstname","lastname","gender","nationality"].includes(o)){var i=Object(E.l)(c.val);i&&(l+=1,C({type:"set-error",payload:[o,i,a,t]}))}else if(["birthDay","birthMonth","birthYear"].includes(o)){var d=c.val?"":"This field cannot be empty!";d&&(l+=1,C({type:"set-error",payload:[o,d,a,t]}))}S({birthDay:e.birthDay,birthMonth:e.birthMonth,birthYear:e.birthYear},N)&&(l+=1)}})})}),Object.entries(r).forEach(function(e){var a=Object(s.a)(e,2),t=a[0],r=a[1];if(r.required)if(["email"].includes(t)){var n=Object(E.k)(r.val);n&&(l+=1,A({type:"set-error",payload:[t,n]}))}else if(["phone"].includes(t)){var o=Object(E.p)(r.val);o&&(l+=1,A({type:"set-error",payload:[t,o]}))}else if(["countryCode"].includes(t)){var c=r.val?"":"This field cannot be empty!";c&&(l+=1,A({type:"set-error",payload:[t,c]}))}}),l)return v("There ".concat(1===l?"is":"are"," ").concat(l," field").concat(1===l?"":"s"," that ").concat(1===l?"is":"are"," not filled correclty. We have highlighted ").concat(1===l?"that":"them"," above. Please check ").concat(1===l?"that":"them"," out!"));a.storeReservation4Hotels(t,n,{clientId:c,ip:n.ip},e.cart)}},"Book My Stay"),p&&m.a.createElement("div",{className:"form-error"},m.a.createElement("p",null,p))))))};a.default=function(e){var a=e.militaryfares,t=e.history,r=e.t,d=e.appActions,u=e.location,p=e.rooms,y=e.userInfo,E=e.clientId,g=e.hotelSelected,k=e.loading,x=e.match.params,I=x.hid,N=x.c_key,O=x.packnum,C=x.lang,j=x.cc,A=m.a.useState([]),w=Object(s.a)(A,2),q=w[0],D=w[1],M=m.a.useState([]),F=Object(s.a)(M,2),B=F[0],Y=F[1];return m.a.useEffect(function(){if(a.urls[0]!==u.pathname){var e=[u.pathname].concat(Object(i.a)(a.urls));e=e.length>10?e.slice(0,9):e,d.militaryfares({urls:e})}},[u]),m.a.useEffect(function(){a.authorized&&a.approved&&d.getPriceValidation(I,N,O,C,j,{clientId:E,ip:y.ip})},[a,I,N,O,C,j,E,y.ip]),m.a.useEffect(function(){g&&g.packs||d.getHotelInfo(I,N,j,C,{clientId:E,ip:y.ip})},[g,I,N,j,C,E,y.ip]),m.a.useEffect(function(){!function(){var t=Object(c.a)(n.a.mark(function t(){var r,c,s,m,u;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([f.a.get("/data/countryPhoneData.json"),Object(v.r)({token:a.token})]);case 2:if(!(r=t.sent)[1].error){t.next=5;break}return t.abrupt("return",d.militaryfares({token:"",authorized:!1}));case 5:c={c_key:N,lang:C,curr:j,packnum:O,hid:I,email:{val:JSON.parse(r[1].json).email||"",err:"",required:!0},phone:{val:"",err:"",required:!0},countryCode:{val:"",err:"",required:!0}},m=[{code:"",name:"--"}].concat(r[0].data.map(function(e){return{code:e.dial_code,name:"".concat(e.name," ").concat(e.dial_code)}})),u=[{code:"",name:"--"}].concat(r[0].data.map(function(e){return{code:e.code,name:e.name}})),JSON.parse(r[1].json).country&&r[0].data.some(function(e){return e.code===JSON.parse(r[1].json).country})?(s=r[0].data.find(function(e){return e.code===JSON.parse(r[1].json).country}),c.countryCode={val:s.dial_code,err:"",required:!0},D([{code:s.dial_code,name:"".concat(s.name," ").concat(s.dial_code)}].concat(m)),Y([{code:s.code,name:s.name}].concat(u))):y.cc&&r[0].data.some(function(e){return e.code===y.cc})?(s=r[0].data.find(function(e){return e.code===y.cc}),c.countryCode={val:s.dial_code,err:"",required:!0},D([{code:s.dial_code,name:"".concat(s.name," ").concat(s.dial_code)}].concat(m)),Y([{code:s.code,name:s.name}].concat(u))):(D(m),Y(u)),c.rooms=p.reduce(function(e,a,t){var r={type:"",guests:[]},n=a[0]+a[1];return Array.from({length:n},function(e,a){return r.guests.push(Object(l.a)({firstname:{val:"",err:"",required:0===a},lastname:{val:"",err:"",required:0===a},gender:{val:"",err:"",required:0===a},nationality:{val:s&&0===a?s.code:"",err:"",required:0===a},birthDay:{val:"",err:"",required:0===a},birthMonth:{val:"",err:"",required:0===a},birthYear:{val:"",err:"",required:0===a}},"lastname",{val:"",err:"",required:0===a}))}),[].concat(Object(i.a)(e),[r])},[]),e.hotelBookform.c_key!==c.c_key||e.hotelBookform.hid!==c.hid||e.hotelBookform.packnum!==c.packnum?d.setHotelBookfrom(c):d.setHotelBookfrom(Object(o.a)({},c,e.hotelBookform));case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[p]),"none"!==k?null:a.authorized?a.authorized&&Object.entries(e.priceValidation).length<2?m.a.createElement(h.a,{className:"overflow-hidden user-panel min-height "},m.a.createElement("div",{className:"text-left margin-b50"},m.a.createElement("div",null,m.a.createElement("h2",null,"Sorry, the page you are looking for does not exist or is expired!"),m.a.createElement("p",null,"Please go back and ",m.a.createElement("a",{onClick:function(){return t.goBack()}},"try again."))))):m.a.createElement(S,Object.assign({},e,{selectArray4CountryCode:q,selectArray4Nationality:B})):m.a.createElement(h.a,{className:"overflow-hidden user-panel min-height "},m.a.createElement("div",{className:"text-left margin-b50"},m.a.createElement("h2",null,r("LOGIN_MESSAGE")),m.a.createElement("br",null),m.a.createElement("p",null,m.a.createElement(b.b,{to:"/login"},"Click here to login.")),m.a.createElement("p",null,"Don't have an account yet? ",m.a.createElement(b.b,{to:"/signup"},"Click here sign up."))))}}}]);