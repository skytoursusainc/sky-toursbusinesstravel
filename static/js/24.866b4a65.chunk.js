(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{961:function(a,e,t){"use strict";t.r(e);var n=t(1),o=t(9),r=t(0),i=t.n(r),c=t(79),l=t(188),s=t(26),m=t.n(s),f=t(112),d=t.n(f),u=t(8),g=t.n(u),p=t(62),w=t.n(p),E=t(21),h=t.n(E),I=t(12),O=t(10),v=t(5),b=t(6),_=(t(747),t(836)),N=t(190),y=t(97),S=t(193),x=t.n(S),j=t(837),L=t(838),R=t(839),k=(t(745),t(840)),D=t(841),A=t(842);!window.location.hostname.indexOf("localhost")>=0&&!window.location.hostname.indexOf("devel")>=0&&N.a.pageview(window.location.pathname+window.location.search);e.default=Object(c.f)(function(a){var e=a.t,t=a.match,r=i.a.useState(),c=Object(o.a)(r,2),s=c[0],f=c[1],u=i.a.useState(),p=Object(o.a)(u,2),E=p[0],N=p[1],S=i.a.useState(),T=Object(o.a)(S,2),P=T[0],M=T[1],B=i.a.useState(!1),C=Object(o.a)(B,2),H=C[0],G=C[1],J=Object(D.a)(a),U=Object(A.a)(a);return i.a.useEffect(function(){var e="";e=window.location.search.indexOf("&lang=")>=0?window.location.search:t.params.lang?window.location.search+"&lang="+t.params.lang:window.location.search+"&lang="+a.lang.value,t.params.lang?a.appActions.setConfirmationInfo(e,a.userInfo,a.clientId):window.location.assign("/"+a.lang.value+window.location.pathname+e),a.appActions.setCart()},[]),i.a.useEffect(function(){if(t.params.lang)if(J&&U&&a.confirmationInfo.hasOwnProperty("status")&&(1===parseInt(a.confirmationInfo.status)||2===parseInt(a.confirmationInfo.status))){f(a.confirmationInfo),a.confirmationInfo.flights[0]?N(a.confirmationInfo.flights[0].language):N(a.lang.value);var e=a.confirmationInfo.full_name.map(function(a){return a.replace(/\//g," ")});M(e),Object(v.I)(Object(n.a)({},a.confirmationInfo,{additionalServicesData:J,hotelData:U,reactLang:a.lang.value,clientId:a.clientId})).then(function(a){a.sendEmail.error&&console.log(a.sendEmail.error)}).catch(function(a){return console.log(a)})}else a.confirmationInfo&&(a.confirmationInfo.hasOwnProperty("status")&&1!=a.confirmationInfo.status&&2!=a.confirmationInfo.status||a.confirmationInfo.hasOwnProperty("error")&&null!==a.confirmationInfo.error&&"BOOKING_FAILED"!==a.confirmationInfo.error)?window.location.assign("/"+a.lang.value+"/myreservation/"):a.confirmationInfo&&a.confirmationInfo.hasOwnProperty("error")&&"BOOKING_FAILED"===a.confirmationInfo.error&&f(a.confirmationInfo)},[a.confirmationInfo,J,U]),i.a.useEffect(function(){var e={curr:a.curr.cc?a.curr.cc:"",lang:a.lang.lang?a.lang.lang:"en",affiliate:sessionStorage.getItem("affiliate")?sessionStorage.getItem("affiliate"):"sky-tours"};s&&s.status&&(1==s.status||2==s.status)&&s.from&&(s.record_locator||s.order)&&(e={curr:a.curr.cc?a.curr.cc:"",lang:a.lang.lang?a.lang.lang:"en",affiliate:sessionStorage.getItem("affiliate")?sessionStorage.getItem("affiliate"):s.affiliate?s.affiliate:"",from:s.from[0]?s.from[0]:"",to:s.to[0]?s.to[0]:"",record_locator:s.record_locator?s.record_locator:"",id:s.order?s.order:"",total_price:s.total_paid?s.total_paid.toString():"",seats:s.full_name.length?s.full_name.length:"",firstname:s.full_name[0]?s.full_name[0].split("/")[0]:"",lastname:s.full_name[0]?s.full_name[0].split("/")[1]:"",email:s.customer_email?s.customer_email:""}),Object(y.a)("TRADEDOUBLER")&&(e=Object(n.a)({},e,{TRADEDOUBLER:Object(y.a)("TRADEDOUBLER")}));var t={dataLayer:e,dataLayerName:"dLayer_1"};s&&a.config.tagManager&&x.a.dataLayer(t)},[s]),i.a.useEffect(function(){if(s&&s.total_paid&&s.record_locator){var a=s.record_locator.toString(),e="".concat(s.curr," ").concat(s.total_paid.toString()),t=JSON.parse(localStorage.getItem("gamitee-analytics-data"));if(t){var n=new XMLHttpRequest;n.open("POST","https://analytics.gamitee.io/report-transaction"),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify({analyticsData:t,transactionId:a,value:e}))}}},[s]),i.a.useEffect(function(){b.eb.includes(E)?G(!0):G(!1)},[E]),i.a.useEffect(function(){if(s&&s.order){var a=document.documentElement.innerHTML;Object(v.M)({order:s.order,html:a}).then(function(a){return a}).catch(function(a){return console.log(a)})}},[s,J,U]),i.a.createElement("div",{className:"section1"},i.a.createElement(l.a,a),s&&(!s.hasOwnProperty("status")||s.hasOwnProperty("status")&&1!=s.status&&2!=s.status?s.hasOwnProperty("error")&&"BOOKING_FAILED"===s.error?i.a.createElement("div",null,i.a.createElement("div",{className:"confirmation-back"},i.a.createElement(m.a,null,i.a.createElement("div",{className:"padding-tb50 clearfix"}),i.a.createElement("div",{className:"text-center clearfix"},i.a.createElement(I.a,{icon:O.Y,className:"fa-4x margin-lr-auto text-white"})),i.a.createElement("div",{className:"text-white font28 padding-tb25"},e("ERROR")),i.a.createElement("div",{className:"text-red padding-tb25 font20 maxw600 margin-lr-auto padding-r20",dangerouslySetInnerHTML:{__html:e("MAX_CONN_ERROR")}}),i.a.createElement(g.a,{className:"text-center"},i.a.createElement(h.a,{onClick:function(){return window.location.assign("/")},className:"margin-lr-auto"},e("GOTO_HOME"))),"elumbus"===window.appenv?i.a.createElement(w.a,{src:"/images.elumbus/el_logo-faded.png",className:"padding-tb50",fluid:!0}):"sky-tours"===window.appenv&&i.a.createElement(w.a,{src:"/images/st_logo_white.svg",width:"70%",className:"padding-tb50"})))):i.a.createElement("div",null,i.a.createElement("div",{className:"confirmation-back"},i.a.createElement("div",{className:"padding-tb50 clearfix"}),i.a.createElement(m.a,null,"elumbus"===window.appenv?i.a.createElement(w.a,{src:"/images.elumbus/el_logo-faded.png",className:"padding-tb50",fluid:!0}):"sky-tours"===window.appenv&&i.a.createElement(w.a,{src:"/images/st_logo_white.svg",width:"70%",className:"padding-tb50"})))):i.a.createElement("div",null,i.a.createElement(_.a,a),i.a.createElement("div",{className:"confirmation-back padding-tb50"},i.a.createElement(m.a,{className:"text-left"},i.a.createElement("div",{className:" ".concat(H?"float-right text-right rtl":""," ")},i.a.createElement(d.a,{className:"info-pages-shadow margin-b50 padding-lr15 padding-tb50 width-100"},i.a.createElement("p",{className:"font20"},i.a.createElement("b",null,"Thank you for your reservation with Sky-tours.com. A confirmation has been sent to your email address. Please check your inbox!")),i.a.createElement(j.a,{data:s,t:e,passengers:P,props:a}),i.a.createElement(L.a,{data:J,t:e}),i.a.createElement(k.a,{data:U,t:e}),i.a.createElement(R.a,{data:s,t:e}))))))))})}}]);